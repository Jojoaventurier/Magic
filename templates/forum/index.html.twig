{% extends 'base.html.twig' %}

{% block title %}Bienvenue sur le forum de Magic-Hub!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Bienvenue sur le forum de Magic-Hub</h1>


    {% include "components/_search_data.html.twig" with {
        searchForm: searchForm ?? null
    } only %}


    {% for category in categories %}
       <h3>{{ category.forumCategoryName }}</h3> 

        {% for subCategory in category.subCategories %}
        <a href="{{ path('app_forum_topics', {id: subCategory.id}) }}">{{ subCategory.subCategoryName }}</a>
        {% endfor %} <br>
    {% endfor %}

    {% if researchToken is same as true %}
        <h3>Résultats de la recherche :</h3>
    {% endif %}
    {% if topics is empty %}
        <p>Aucun résultat trouvé.</p>
    {% endif %}

    <div class="forum-wrapper">

        {% for topic in topics %}
        <div class="postCard">
            <p>
                Par {{ topic.user.userName }} 
                {% if topic.editDate is same as null %}
                    posté le {{ topic.creationDate|date('d.m.Y H:i') }} ,
                    {% else %}
                    modifié le {{ topic.editDate|date('d.m.Y H:i') }}
                {% endif %}
            </p>
            <p>
                {{ topic.topicTitle }}
            </p>
            {% if app.user is same as topic.user %}
                <a href="{{ path('edit_topic', {'id': topic.id}) }}">Modifier</a>
                {# <a href="{{ path('lock_topic', {id : topic.id}) }}">Verrouiller</a> #} 
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <div class="navigation flex justify-center mb-8">
        {{ knp_pagination_render(topics) }}        
    </div>
    
</div>

{% endblock %}

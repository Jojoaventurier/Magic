{% extends 'base.html.twig' %}

{% block title %}Hello ForumController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Bienvenue sur le forum de Magic-Hub</h1>


    {% include "components/_search_data.html.twig" with {
        searchForm: searchForm
    } only %}

    {% for category in categories %}
    
       <h3>{{ category.forumCategoryName }}</h3> 

        {% for subCategory in category.subCategories %}

        <a href="{{ path('app_forum_topics', {id: subCategory.id}) }}">{{ subCategory.subCategoryName }}</a>

        {% endfor %} <br>
      
    {% endfor %}


    <div class="forum-wrapper">
        {% for post in posts %}
        <div class="postCard">
            <p>
                Par {{ post.user.userName }} 
                {% if post.editDate is same as null %}
                    posté le {{ post.creationDate|date('d.m.Y H:i') }} ,
                    {% else %}
                    modifié le {{ post.editDate|date('d.m.Y H:i') }}
                {% endif %}
            </p>
            <p>
                {{ post.textContent }}
            </p>

            {% if app.user is same as post.user %}
                <a href="{{ path('edit_post', {'topic': topic.id, 'post': post.id}) }}">Modifier</a>
                <a href="{{ path('delete_post', {id : post.id}) }}">Supprimer</a>
            {% endif %}
            {% endfor %}
        </div>

    </div>
</div>

{% endblock %}
